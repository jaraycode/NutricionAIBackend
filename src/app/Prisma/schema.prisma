generator client {
    provider             = "prisma-client-py"
    recursive_type_depth = 5
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model User {
    user_id      Int            @id @default(autoincrement())
    roleId       Int
    name         String         @db.VarChar(100)
    last_name    String         @db.VarChar(100)
    email        String         @unique @db.VarChar(100)
    password     String         @db.VarChar(255)
    birth_date   DateTime
    createAt     DateTime       @default(now())
    updateAt     DateTime       @updatedAt
    role         Role           @relation(fields: [roleId], references: [id])
    registerFood RegisterFood[]

    @@map("users")
}

model Role {
    id   Int    @id @default(autoincrement())
    name String @unique
    User User[]
}

model Food {
    id           Int            @id @default(autoincrement())
    name         String
    foodGr       Float
    calories     Float
    registerFood RegisterFood[]
}

model Configuration {
    id   Int  @id @default(autoincrement())
    info Json
}

model RegisterFood {
    id     DateTime @default(now())
    userId Int
    foodId Int
    foodGr Float

    user User @relation(fields: [userId], references: [user_id])
    food Food @relation(fields: [foodId], references: [id])

    @@id([id, userId, foodId])
}
